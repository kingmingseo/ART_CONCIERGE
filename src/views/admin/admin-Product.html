<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prestige Collection</title>

    <!-- Bulma CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">

    <!-- JQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

    <!-- Font - Noto Sans Korean semibold 600 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@600&display=swap" rel="stylesheet">

    <!-- Custom CSS & JS -->
    <link rel="stylesheet" href="./admin-Category.css" />
    <script src="../public/loadHTML.js"></script>
    <link rel="stylesheet" href="../public/Header/header.css" />
    <link rel="stylesheet" href="../public/Footer/footer.css" />

</head>
<body>
  <!-- Header -->
  <script>
    loadHTML("../public/Header/header.html");
  </script>
  
  <main class="main">
    <aside>
      <div class="side-menu" style="
        float: left;
        position: fixed;
        top: 100px;
        margin-top : 120px;
        margin-left : 250px;
        width: 200px; 
        margin-right: 50px;
      ">
        <h3 class="title is-3">Admin</h3>
        <a class="active has-text-black" href="./admin-Category.html" style="font-weight: bold;">카테고리 관리</a><br />
        <a class="has-text-black" href="./admin-Product.html">상품 관리</a><br/>
        <a class="has-text-black" href="./admin-Order.html">주문 관리</a>
      </div>
    </aside>
    <section class="section" style="font-weight: 600 !important;">
      <div class="container" style="width: 50%;">
        <h1 class="title has-text-centered">상품 관리</h1>
        <div style="display: flex; justify-content: flex-end;">
          <div><button onclick="product_Add()">추가</button></div>
        </div>
        <table class='table' style="width: 100%;">
          <thead>
            <tr>
              <th>카테고리명</th>
              <th>전시회명</th>
              <th>이미지</th>
              <th>수정 & 삭제</th>
            </tr>
          </thead>
          <tbody id="product_List">
            <!-- 상품 목록이 들어갈 부분 -->
          </tbody>
        </table>
      </div>
    </section>
  </main>
  <!-- Footer -->
  <script>
    loadProduct();

    // 상품 데이터 load
    function loadProduct() {
      // 상품 전체 조회 API(상품ID, 카테고리명, 전시회명, 이미지)
      let data = [
        [1, '사진', 'Time Lapse : 어느 시간에 탑승하시겠습니까?', './assets/productTestImage-1.png'], 
        [2, '체험형', 'Ursula Palla: The MOON In My Pocket', './assets/productTestImage-2.png'], 
        [3, '그림', '미셸 들라크루아, 파리의 벨 에포크', './assets/productTestImage-3.png'], 
        [4, '조각', '권여현《춤추는 사유: IN A TRANCE》', './assets/productTestImage-4.png'], 
      ]
      let table_Body = document.querySelector("#product_List");

      data.forEach(product => {
        table_Body.innerHTML += `
          <tr>
            <td>${product[1]}</td>
            <td>${product[2]}</td>
            <td style="max-height: fit-content;"><a href="${product[3]}" target="_blank"><img src="${product[3]}" alt="" style="max-height: 36px;"></a></td>
            <td>
              <button id="${product[0]}" onclick="product_Modify(this.id)">수정</button>
              <button id="${product[0]}" onclick="product_Delete(this.id)">삭제</button>
            </td>
          </tr>
        `;
      });
    }

    // 상품 추가 버튼 클릭
    function product_Add(){
      let add_URL = "http://127.0.0.1:5501/views/admin/admin-ProductAdd.html"
  
      window.location.href = add_URL;
      // history.pushState(null, null, add_URL);
      // location.assign(add_URL);
    }

    // 상품 수정 버튼 클릭
    function product_Modify(productId) {
      // productID로 특정 상품 1개를 조회하는 API
      let data = [1, '사진', 'Time Lapse : 어느 시간에 탑승하시겠습니까?', './assets/productTestImage-1.png'];
      let query_Data = [1, '제목', '주소', '엘리스', 50000, '설명']
      /*
        let queryString_1 = urlParams.get('productId');
        let queryString_2 = urlParams.get('productName');
        let queryString_3 = urlParams.get('productPlace');
        let queryString_4 = urlParams.get('author');
        let queryString_5 = urlParams.get('price');
        let queryString_6 = urlParams.get('description');
      */

      let modify_URL = `http://127.0.0.1:5501/views/admin/admin-ProductModify.html?productId=${query_Data[0]}&productName=${query_Data[1]}&productPlace=${query_Data[2]}&author=${query_Data[3]}&price=${query_Data[4]}&description=${query_Data[5]}`;

      window.location.href = modify_URL;
    }

    // 상품 삭제 버튼 클릭
    function product_Delete(productId) {
      let isConfirmed = confirm('삭제하시겠습니까?');

      if (isConfirmed) {
        alert(`삭제할 상품ID : ${productId}`);
        // 상품 삭제 API
      }
    }
  </script>
</html>